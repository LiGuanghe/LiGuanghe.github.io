 ## 背景
<- [3w[atl4dama] 时间帐单效能分析 再续再试 · Issue #131 · DebugUself/du4proto](https://github.com/DebugUself/du4proto/issues/131)

8.20 小组项目继续 zoom 会议: 链接: https://pan.baidu.com/s/1i4BbPRJ 密码: pwt4

## 行动
- [x] 7d alt4dama项目接续 [6d[atl4dama]时间账单效能分析 · Issue #200 · DebugUself/du4proto](https://github.com/DebugUself/du4proto/issues/200)
  - [x] d1 成员小会
    - [x] d1 广鹤 会议记录
    - [x] d1 诗颖 增补进展
    - [x] d1 明星 增补进展
```
结论: 
    - 以需求为导向, 和功能不断结合, 所以先明确需求, 也就是知道最终要呈现什么. 
        - 最终用 pandas 导出结果
        - pandas 是数据分析和数据可视化工具
        - pandas 的难点及核心是矩阵
        - 知道 pandas 需要什么数据, 再回到数据清洗和数据整理那里, 找到需要的数据类型和特点
            + 理解数据清洗的代码
            + 写出数据整理的代码
    - 现阶段成果
        - 数据清洗 
            - 精确到秒的数据
            - 数据分类: output/input/life/chaos
        - SET4 算法指数
    - 行动节奏及可获得的帮助
        + 21min 42 min 120hour 6d
        + issue/slack
        + 组员/怼圈
```
  - [x] d3 需求及最终形式最初理解
    - [x] pandas 官方文档中视频泛读, google pandas 图片
    - [x] 对可视化的理解和需求导出
```
- 可视化: big - small  dark - light(add) high - low front - behind  time(gif) 
- 目的: 
    - 找出红色的规律, 高效时间段
        - 断点指数 两个红色之间的部分
        - 那红色就是灵感, 就是效率, 淡入,淡出. 随着它的跳动, 你仿佛看到自己的热情和行动在动, 生命的律动. 

    - 找出形成规律的路径(动图 + 时间线)
```

![](https://ws3.sinaimg.cn/large/006tKfTcgy1fis10e1fwtj30k00f0154.jpg)

```
上图是 1w 7d 24h 四种分类段在其中的分布(output- red, input-orange, life-green, chaos- blue)
52w: 将1-52w 叠加, 颜色最深的部分, 也是效率最高的地方. 中间断点的常见颜色是什么? ...
3y, 5y, 10y 叠加 或变成时间线/对比图, 可看出形成规律的路径 
```
  - [x] d3 配置 pandas 环境
    - [x] home
```
- data structure
- data analyze
- python
- Warning

Pandas has changed the internal structure and layout of the codebase. This can affect imports that are not from the top-level pandas.* namespace, please see the changes here.

Check the API Changes and deprecations before updating.

- Note

This is a combined release for 0.20.0 and and 0.20.1. Version 0.20.1 contains one additional change for backwards-compatibility with downstream projects using pandas’ hashing routines.

```
    - [ ] d4 install
        - [x] anaconda 里包含pandas 无需下载
[Installation — pandas 0.20.3 documentation](http://pandas.pydata.org/pandas-docs/stable/install.html#dependencies)
- [x] 试运行
```
$python
>>> import pandas as pd
>>> pd.test()
```
- [x] 坑: [12h[BUG]试运行 pandas 失败,已安装 anaconda. · Issue #202 · DebugUself/du4proto](https://github.com/DebugUself/du4proto/issues/202)
``` 497 skipped, 16 xfailed, 10019 error in 79.77 seconds ```
``` $ source activate pythong3.6.2 ```

- [x] d4/5 寻找 pandas 实现需求的思路
    - [x] d4 矩阵 Matrix
        - [x] [Matrix (mathematics) - Wikipedia](https://en.wikipedia.org/wiki/ Matrix_(mathematics)) 
        - [x] 矩阵的基本样式
[Sun,Mon, Tus, Wen, Tur, Fri, Sat]
[living, chaos, input, output, living, chaos, input]
        - [ ] 矩阵功能: 解线性方程组, 线性方程跟我们的数据有什么关系? 跟 SET4算法有关?
        - [ ] 术语: 线性函数/向量/特征值/特征向量/矩阵加减法/矩阵乘法
    - [x] d5 做一个7×24(细化到秒)的表格
        - [x] pandas overview [Package overview — pandas 0.20.3 documentation](http://pandas.pydata.org/pandas-docs/stable/overview.html#)
[pandas overview.md](https://github.com/DebugUself/du4proto/blob/atl4dama/doc/%23%23%20pandas%20overview.mdown) 
        - [x] pandas 10 mins [10 Minutes to pandas — pandas 0.20.3 documentation](http://pandas.pydata.org/pandas-docs/stable/10min.html)
[lgh_pandas_10mins.ipynb](https://github.com/DebugUself/du4proto/blob/atl4dama/doc/lgh_pandas_10mins.ipynb)
```
初步了解pandas: 
- 术语, index/column/value/
- 数据结构: series/dataframe/?
- 语法: df.radom.radin(index = , column= , ...)
- 功能
    + 导入/导出数据
    + 选择其中的特定行/列/标签/位置
    + 合并/分离
    + 组
    + ... 
```

- [ ] [Essential Basic Functionality — pandas 0.20.3 documentation](http://pandas.pydata.org/pandas-docs/stable/basics.html#basics)
这张表是 DataFrame 结构

```
## 目标
最终建成一个填满一个矩阵的彩虹图. 每一个种类有特别的颜色, 直观的布满对应的时间. 

### 方案1: 

s\d|sun|mon|tus|wen|tur|fri|sat
---|---|---|---|---|---|---|---
1|chaos
2|chaos
3|
.
.
.
86400|

- index = s
- columns = 7days of a week 
- values = input/output..
- 每一类的开始和结尾都分布到相应的秒数空格里
- ploting, 给各类不同的颜色

### question
- 这样的表格可以转化成可视化的表格么? 做好以后, 直接上色. 或者plotting 自带上色功能. 理论上是可以的.  
- 目测问题是, 行数太多.86,400行
- 跟时间的关系, date, 有无直接跟 s 秒数和周一...关联的 pandas 词汇?
- 有没有比这更优雅的方案? 

```
- [x] d5 google 矩阵散点图 pandas
    - [x] 散点图 X Y scatterplot
    - [x] [Plotting — pandas 0.15.0 documentation](http://pandas.pydata.org/pandas-docs/version/0.15.0/visualization.html)
    - [x] [pandas.DataFrame.plot.scatter — pandas 0.20.3 documentation](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.plot.scatter.html)
```
散点图
>>> import matplotlib.pyplot as plt
>>> df = DataFrame(rand(50, 4), columns=['a', 'b', 'c', 'd'])
>>> df.plot(kind='scatter', x='a', y='b');
...
```
- [x] d6 看大妈用 pandas 完成数据清洗 [zq4cleanning](http://localhost:8888/notebooks/try/zq4cleanning.ipynb)

```
- 大妈用 pandas 快速重做了一次数据清洗, 之前用.py脚本和管道也做了一次. 
- 用 pandas 打开.csv 文件
- 用 pandas 小数形式的秒
- 用 python 官方标准库中的 date, 解决时间转化问题
- pandas 的 time? 
- pandas 可以自动将对应的秒转化成轴上的时间么? 
- 大妈用 pandas/.py脚本生成的.csv是什么? 
```
- [ ] d8 用 pandas DataDrame 做一个 散点图

![](https://ws2.sinaimg.cn/large/006tNc79gy1fivmpfkn29j30um0l8tbf.jpg)


```
初步想法: 
df = pd.DataFrame(np.random.randn(86401,8), index=DatetimeIndex.second, columns=DatetimeIndex.weekday)
```
- [ ] DataDrame基本语法
    - [ ]  
    - [ ] Numpy? 
```
基本语法: 
- 可以从Numpy 里导出
- 也可以从字典里导出
- 可以从.csv 里导出么
df = pd.DataDrame
```
- [ ] index 秒
    - [ ] pandas 时间[pandas.DatetimeIndex — pandas 0.20.3 documentation](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DatetimeIndex.html?highlight=datetimeindex#pandas-datetimeindex)
    - [ ] [pandas.DatetimeIndex.second — pandas 0.20.3 documentation](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DatetimeIndex.second.html?highlight=datetimeindex#pandas.DatetimeIndex.second)
- [ ] column 周日期
    - [ ] pandas 时间 [pandas.DatetimeIndex.weekday — pandas 0.20.3 documentation](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DatetimeIndex.weekday.html?highlight=datetimeindex#pandas.DatetimeIndex.weekday)
    - [ ] [pandas.DatetimeIndex.week — pandas 0.20.3 documentation](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DatetimeIndex.week.html?highlight=datetimeindex#pandas.DatetimeIndex.week)
- [ ] values: 清洗好的数据
- [ ] group1: input, group2:output,group3:life,group4:chaos
- [ ] 规格 86400行, 压缩在一个页面长短. 
- [ ] 导入现有清洗好的数据
    - [ ] 查看现有的数据,看是什么格式
    - [ ] 凑在一起 
[lgh_pandas_scatterplot.ipynb](https://github.com/DebugUself/du4proto/blob/atl4dama/try/lgh_pandas_scatterplot.ipynb)
- [ ] 讨论最佳可视化方法
    - [ ] [数据可视化 到 可视化信息 浅述 - 简书](http://www.jianshu.com/p/49132ffcac8b)
![](https://ws1.sinaimg.cn/large/006tNc79gy1fiw2l4i0q5j30kj0f977t.jpg)
    - [ ] 图片解释 
- [ ] 把52w的叠加
- [ ] d7 发布第一张表格

## 展望
- 做成网页, 输入报告, 生成视图
- 寻找<奇特的一生>的书友会, 推送网页, 如果没有, 自己建一个. 
- 添加评论界面和论坛
- 推送时间记录群
- 时间记录结合 github 数据
 